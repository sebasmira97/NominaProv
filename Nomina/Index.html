<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generador JSON N√≥mina Electr√≥nica</title>
    <link rel="stylesheet" href="styles.css">
    <script src="api-config.js" defer></script>
    <script src="main.js" defer></script>
</head>
<body>
    <div class="container">
        <h1>üìÑ Generador JSON N√≥mina Electr√≥nica</h1>
        
        <div class="info-box">
            <h3>üìã Instrucciones</h3>
            <p>Complete los datos para generar un archivo JSON con la estructura exacta requerida para la transmisi√≥n de n√≥mina electr√≥nica. El archivo se descargar√° autom√°ticamente en formato TXT/JSON listo para env√≠o.</p>
        </div>
        
        <!-- Configuraci√≥n General -->
        <div class="section">
            <h2><span class="icon">‚öôÔ∏è</span>Configuraci√≥n General</h2>
            <div class="form-grid">
                <div class="form-group">
                    <label for="resolutionNumber">N√∫mero de Resoluci√≥n</label>
                    <input type="text" id="resolutionNumber" placeholder="18760000001" value="18760000001">
                </div>
                <div class="form-group">
                    <label for="documentNumber">N√∫mero de Documento</label>
                    <input type="text" id="documentNumber" placeholder="1">
                </div>
                <div class="form-group">
                    <label for="generationCityId">Ciudad de Generaci√≥n</label>
                    <div style="display: flex; gap: 10px; align-items: center;">
                        <input type="text" id="generationCityId" placeholder="Medell√≠n" value="1" style="flex: 1;">
                        <button type="button" onclick="reloadCities()" class="btn-reload" title="Recargar ciudades desde API">
                            üîÑ
                        </button>
                    </div>
                </div>
                <div class="form-group">
                    <label for="payDay">Fecha de Pago</label>
                    <input type="date" id="payDay">
                </div>
                <div class="form-group">
                    <label for="generationDate">Fecha de Generaci√≥n</label>
                    <input type="date" id="generationDate">
                </div>
                <div class="form-group">
                    <label for="generationTime">Hora de Generaci√≥n</label>
                    <input type="time" id="generationTime" value="10:00:00">
                </div>
            </div>
        </div>

        <!-- Per√≠odo -->
        <div class="section">
            <h2><span class="icon">üìÖ</span>Informaci√≥n del Per√≠odo</h2>
            <div class="form-grid">
                <div class="form-group">
                    <label for="dateEntry">Fecha de Ingreso</label>
                    <input type="date" id="dateEntry">
                </div>
                <div class="form-group">
                    <label for="departureDate">Fecha de Retiro</label>
                    <input type="date" id="departureDate" placeholder="Dejar vac√≠o si est√° activo">
                </div>
                <div class="form-group">
                    <label for="settlementStartDate">Fecha Inicio Liquidaci√≥n</label>
                    <input type="date" id="settlementStartDate">
                </div>
                <div class="form-group">
                    <label for="settlementEndDate">Fecha Fin Liquidaci√≥n</label>
                    <input type="date" id="settlementEndDate">
                </div>
                <div class="form-group">
                    <label for="timeWorked">Tiempo Trabajado (d√≠as)</label>
                    <input type="number" id="timeWorked" placeholder="30" value="30">
                </div>
                <div class="form-group">
                    <label for="periodId">Per√≠odo</label>
                    <select id="periodId">
                        <option value="1">Enero</option>
                        <option value="2">Febrero</option>
                        <option value="3">Marzo</option>
                        <option value="4">Abril</option>
                        <option value="5">Mayo</option>
                        <option value="6">Junio</option>
                        <option value="7">Julio</option>
                        <option value="8">Agosto</option>
                        <option value="9">Septiembre</option>
                        <option value="10">Octubre</option>
                        <option value="11">Noviembre</option>
                        <option value="12">Diciembre</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Empleados -->
        <div class="section">
            <h2><span class="icon">üë•</span>Empleados</h2>
            <div id="employeesContainer">
                <div class="employee-section">
                    <!-- Informaci√≥n Personal -->
                    <div class="subsection">
                        <h3>üìã Informaci√≥n Personal</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Tipo de Trabajador</label>
                                <select class="workerTypeId">
                                    <option value="1">Empleado</option>
                                    <option value="2">Trabajador Asociado</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Subtipo de Trabajador</label>
                                <select class="workerSubtypeId">
                                    <option value="1">Dependiente de salario integral</option>
                                    <option value="2" selected>Dependiente de salario no integral</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Tipo de Documento</label>
                                <select class="identityDocumentId">
                                    <option value="1" selected>C√©dula de Ciudadan√≠a</option>
                                    <option value="2">C√©dula de Extranjer√≠a</option>
                                    <option value="3">NIT</option>
                                    <option value="4">Pasaporte</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>N√∫mero de Documento</label>
                                <input type="text" class="documentNumber" placeholder="1063279307">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label>Primer Apellido</label>
                                <input type="text" class="firstSurname" placeholder="Perez">
                            </div>
                            <div class="form-group">
                                <label>Segundo Apellido</label>
                                <input type="text" class="secondSurname" placeholder="Gomez">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label>Primer Nombre</label>
                                <input type="text" class="firstName" placeholder="Pedro">
                            </div>
                            <div class="form-group">
                                <label>Segundo Nombre</label>
                                <input type="text" class="otherNames" placeholder="">
                            </div>
                        </div>
                    </div>

                    <!-- Informaci√≥n Laboral -->
                    <div class="subsection">
                        <h3>üíº Informaci√≥n Laboral</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Pa√≠s de Trabajo</label>
                                <select class="workingCountryId">
                                    <option value="45" selected>Colombia</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="workCityId">Ciudad de Trabajo</label>
                                <div style="display: flex; gap: 10px; align-items: center;">
                                    <input type="text" id="workCityId" class="workCityId" placeholder="Medell√≠n" value="1" style="flex: 1;">
                                    <button type="button" onclick="reloadWorkCities()" class="btn-reload" title="Recargar ciudades desde API">
                                        üîÑ
                                    </button>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Direcci√≥n de Trabajo</label>
                                <input type="text" class="workAddress" placeholder="Calle 64 #1631 La Capilla">
                            </div>
                            <div class="form-group">
                                <label>Tipo de Contrato</label>
                                <select class="contractTypeId">
                                    <option value="1">T√©rmino indefinido</option>
                                    <option value="2">T√©rmino fijo</option>
                                    <option value="3">Obra o labor</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Salario</label>
                                <input type="number" class="salary" placeholder="1200000">
                            </div>
                            <div class="form-group">
                                <label>C√≥digo de Trabajador</label>
                                <input type="text" class="workerCode" placeholder="1063279307">
                            </div>
                            <div class="form-group">
                                <label>¬øSalario Integral?</label>
                                <select class="integralSalary">
                                    <option value="false">No</option>
                                    <option value="true">S√≠</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>¬øAlto Riesgo Pensional?</label>
                                <select class="highRiskPension">
                                    <option value="false">No</option>
                                    <option value="true">S√≠</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Informaci√≥n de Pago -->
                    <div class="subsection">
                        <h3>üè¶ Informaci√≥n de Pago</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label>M√©todo de Pago</label>
                                <select class="paymentMethodId">
                                    <option value="1" selected>Contado</option>
                                    <option value="2">Cr√©dito</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Medio de Pago</label>
                                <select class="meansPaymentId">
                                    <option value="31">D√©bito de cuenta corriente</option>
                                    <option value="42" selected>D√©bito de cuenta de ahorros</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Banco</label>
                                <input type="text" class="bank" placeholder="BANCOLOMBIA">
                            </div>
                            <div class="form-group">
                                <label>Tipo de Cuenta</label>
                                <select class="accountType">
                                    <option value="AHORROS" selected>Ahorros</option>
                                    <option value="CORRIENTE">Corriente</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>N√∫mero de Cuenta</label>
                                <input type="text" class="accountNumber" placeholder="96645544844">
                            </div>
                        </div>
                    </div>

                    <!-- Devengados -->
                    <div class="subsection">
                        <h3>üí∞ Devengados</h3>
                        
                        <!-- B√°sico -->
                        <h4>Salario B√°sico</h4>
                        <div class="form-row">
                            <div class="form-group">
                                <label>D√≠as Trabajados</label>
                                <input type="number" class="workedDays" placeholder="30" value="30">
                            </div>
                            <div class="form-group">
                                <label>Salario Trabajado</label>
                                <input type="number" class="salaryWorked" placeholder="1200000">
                            </div>
                        </div>

                        <!-- Transporte -->
                        <h4>Auxilio de Transporte</h4>
                        <div class="form-row-3">
                            <div class="form-group">
                                <label>Auxilio de Transporte</label>
                                <input type="number" class="transportationAssistance">
                            </div>
                            <div class="form-group">
                                <label>Vi√°ticos Manutenci√≥n</label>
                                <input type="number" class="viaticMaintenance" placeholder="0" value="0">
                            </div>
                            <div class="form-group">
                                <label>Vi√°ticos No Salariales</label>
                                <input type="number" class="viaticNonSalary" placeholder="0" value="0">
                            </div>
                        </div>

                        <!-- Otros Conceptos -->
                        <div class="form-row-3">
                            <div class="form-group">
                                <label>Bonificaciones</label>
                                <input type="number" class="bonusPayment" placeholder="0" value="0">
                            </div>
                            <div class="form-group">
                                <label>Comisiones</label>
                                <input type="number" class="commission" placeholder="0" value="0">
                            </div>
                            <div class="form-group">
                                <label>Otros Conceptos Salariales</label>
                                <input type="number" class="conceptS" placeholder="0" value="0">
                            </div>
                        </div>
                    </div>

                    <!-- Deducciones -->
                    <div class="subsection">
                        <h3>‚ûñ Deducciones</h3>
                        <div class="form-row-2">
                            <div class="form-group">
                                <label>% Salud</label>
                                <input type="number" class="healthPercentage" placeholder="4" value="4" step="0.01">
                            </div>
                            <div class="form-group">
                                <label>Deducci√≥n Salud</label>
                                <input type="number" class="healthDeduction" placeholder="48000" readonly>
                            </div>
                        </div>
                        <div class="form-row-2">
                            <div class="form-group">
                                <label>% Pensi√≥n</label>
                                <input type="number" class="pensionPercentage" placeholder="4" value="4" step="0.01">
                            </div>
                            <div class="form-group">
                                <label>Deducci√≥n Pensi√≥n</label>
                                <input type="number" class="pensionDeduction" placeholder="48000" readonly>
                            </div>
                        </div>
                        <div class="form-row-2">
                            <div class="form-group">
                                <label>Pagos a Terceros</label>
                                <input type="number" class="thirdPartyPay" placeholder="90000" value="0">
                            </div>
                            <div class="form-group">
                                <label>Otras Deducciones</label>
                                <input type="number" class="otherDeduction" placeholder="0" value="0">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Vista Previa JSON -->
        <div class="section preview-section">
            <h2><span class="icon">üëÅÔ∏è</span>Vista Previa del JSON</h2>
            <div class="json-preview" id="jsonPreview">
                El JSON se generar√° autom√°ticamente cuando complete los datos...
            </div>
        </div>
        
        <div class="btn-container">
            <button class="btn btn-secondary" onclick="updatePreview()">
                üîÑ Actualizar Vista Previa
            </button>
            <button class="btn" onclick="generateJSON()">
                üíæ Descargar JSON
            </button>
        </div>
    </div>

    
</body>
</html>